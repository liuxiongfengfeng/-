# 1.三种网络连接模式

> #### 1.桥接模式：虚拟机设置和外部系统同一网段，可和外部系统通信，但容易造成IP冲突
> 
> #### 2.NAT模式（网路地址转换模式）:主机生成一个虚拟IP用于和虚拟机通信，虚拟机可通过主机代理和外部通信，可避免IP冲突
> 
> #### 3.主机模式：独立的系统
* * *
* * *

# 2.安装vmtools

> #### 1.安装vmtools
> 
> #### 2.将vmtools.tar.gz文件拷贝到 /opt 目录下
> 
> #### 3.解压vmtools.tar.gz文件（tar -zxvf xx.tar.gz）
> 
> #### 4.安装 vmware-install.pl (./vmware-install.pl)
> 
> ### 注意：安装vmtools 需要gcc

* * *

* * *

# 3.共享文件夹

> #### 1.在mnt目录下

* * *

* * *

# 4.Linux目录结构

> #### 1./bin：存放一些常用的命令
> 
> #### 2./sbin：存放系统管理员使用的系统管理命令（s就是super user）
> 
> #### 3./home：存放普通用户的主目录
> 
> #### 4./root：存放root用户
> 
> #### 5./lib：系统开机所需要的基本的动态连接共享库
> 
> #### 6./lost+found：当系统非法关机时就会存放一些文件
> 
> #### 7./etc：所有系统管理所需要的配置文件和子目录（比如mysql的配置文件）
> 
> #### 8./usr：用户安装的应用程序和文件都放在这个目录下
> 
> #### 9./boot：Linux启动时使用的一些核心文件，包括一些连接文件和镜像文件
> 
> #### 10./proc：虚拟的目录，他是系统内存的映射，访问这个目录来获取系统信息（不能动）
> 
> #### 11./srv：service的缩写，该目录下存放一些服务启动后需要提取的一些数据
> 
> #### 12./sys：该目录是Linux2.6内核的一个很大的变化，存放2.6内核中新出现的文件系统sysfs（不能动）
> 
> #### 13./tmp：存放临时文件
> 
> #### 14./dev：类似于windows的设备管理器，把所有的硬件以文件的形式存储
> 
> #### 15./media：Linux自动识别一些设备，如U盘，光驱，会将其挂载到这个目录下
> 
> #### 16./mnt：用户临时挂载别的文件系统,可将外部存储挂载到该目录下，
> 
> #### 17./opt：主机额外安装软件所摆放的目录
> 
> #### 18./usr/local：另一个安装软件的目录，一般存放以编译源码方式安装的程序
> 
> #### 19./var：存放一些不断被扩充的东西，习惯将一些需要经常修改的东西放在这个目录下，比如日志
> 
> #### 20./selinux：安全子系统，它能控制程序只访问特定的文件，有三种工作模式，可切换

* * *

* * *

# 5.vim编辑程序

> ### 1.创建文件（vim Hello.java）
> 
> ### 2.进入插入模式 （i,o,a,r 大小写随意）
> 
> ### 3.进入命令行模式（esc :）在该模式下可完成存盘、读取、替换、离开vim、显示行号等
> 
> ### 4.vim命令：
> 
> > #### 1.wq：写入并退出
> > 
> > #### 2.q：退出
> > 
> > #### 3.q！：强制退出（不保存）
> > 
> > #### 4.yy：拷贝（拷贝向下五行 5yy，须在一般模式下进行）
> > 
> > #### 5.p：粘贴
> > 
> > #### 6.dd：删除（删除向下五行 5dd)
> > 
> > #### 7.查找：在命令行下输入 /+关键词 ， 输入 n 查找下一个
> > 
> > #### 8.设置文件的行号，取消行号：命令行下 输入 set nu 和 set nonu
> > 
> > #### 9.首行和末行：gg 和 G
> > 
> > #### 10.撤销动作：在一般模式下输入 u
> > 
> > #### 11.定位到模式行：行号+shift+g

# 6.开机、重启、用户登录注销

> ## 1.关机和重启
> 
> > #### 1.shutdown -h now : 立即关机（-h ： halt 停止）
> > 
> > #### 2.shutdown -h 1 : 一分钟后关机
> > 
> > #### 3.shutdown -h now ：立即重启
> > 
> > #### 4.halt：关机，作用和 和shutdown一样
> > 
> > #### 5.reboot：重启
> > 
> > #### 6.sync：将内存中的数据同步到磁盘（关机重启前最好先执行这个命令）
> 
> ## 2.用户登录和注销
> 
> > #### 1.为避免操作失误，登录时尽量少用root用户，可利用普通用户登录，登录后再用 “su - 用户名”命令来切换成系统管理员身份，权限高的用户到权限低的用户不需要密码，反之需要
> > 
> > #### 2.logout：注销用户

# 7.用户管理

> ## 1.添加用户
> 
> > #### 1.useradd 用户名
> > 
> > #### 2.useradd -d 目录 用户名：给新创建的用户指定家目录
> > 
> > #### 3.给指定用户添加或修改密码：passwd 用户名
> > 
> > #### 4.pwd：显示当前位置
> > 
> > #### 5.userdel 用户名：删除用户保留家目录
> > 
> > #### 6.userdel -r 用户名：删除用户及其家目录
> > 
> > #### 7.id 用户名：查询用户信息
> > 
> > #### 8.who am i：查看当前用户
> 
> ## 2.用户组
> 
> > ### 1.系统将对有相同共性的多个用户进行统一管理
> > 
> > ### 2.groupadd 组名：添加用户组
> > 
> > ### 3.groupdel 组名：删除组
> > 
> > ### 4.useradd -g 组名 用户名：添加一个用户并指定其用户组
> > 
> > ### 5.usermod -g 组名 用户名：修改用户所在的组
> > 
>  ## 3.用户和组的文件夹
> > 
> > #### 1./etc/passwd：用户相关配置
> > 
> > #### 2./etc/shadow：口令相关配置
> > 
> > #### 3./etc/group：组相关配置

* * *

* * *

# 8.实用指令

> ## 1.运行级别
> >![[运行级别.jpg]]
> > #### 1.级别切换命令：init 级别
> > 
> > #### 2.systemctl get-default：获取当前运行级别
> > 
> > #### 3.systemctl set-default TARGET.target
> 
> ## 2.root 用户找回密码
>  > ![[找回root密码01.jpg]]
> > #### 1.重启 按 e
> > 
> > #### 2.将 **ro** 改为 **rw**，在最后输入 init=/bin/sh
> > 
> > 
> > #### 3.按 **ctrl+x** 进入单用户模式
> > 
> > #### 4.输入passwd修改密码
> > 
> > #### 5.由于selinux开启，输入touch / .autorelabel 更新系统信息，是新密码生效
> > 
> > #### 6.输入exec /sbin/init 重启
> 
> ## 3.帮助命令
> 
> > 1.man + 命令或配置文件：获取帮助信息
> > 2.help + 命令：获取命令的帮助信息
> 
> ## 4.文件目录类
> 
> > #### 1.pwd：查看当前工作目录绝对路径
> > 
> > #### 2.ls：显示当前目录下所有文件及文件夹(-h：以更适合人查看的方式显示)
> > 
> > #### 3.cd：切换到指定目录（cd ~切换到家目录）
> > #### 4.mkdir 选项 目录：创建目录（mkdir -p 目录：创建多级目录）
> > #### 5.rmdir 目录：删除空目录
> > #### 6.rm -rf 目录：删除非空目录（-r：递归，-f：强制删除不提示）
> > #### 7.touch：创建空文件
> > #### 8.cp source dest：拷贝文件到指定目录（
> > 			cp -r source dest：递归拷贝
> >			 cp -f source dest：不提示是否覆盖）
> >#### 9.mv：移动文件与目录或重命名（在同一个目录下重命名，不在同一个目录下移动）
> > >例：mv OldFileName New
> > >mv /temp/moveFile /targetFolder 
> >#### 10.cat：查看文件，相对与vim更安全，不能修改（-n 显示行号，为浏览方便可结合管道命令 | more 使用，单独使用more也可查看文件）
> >#### 11.less：跟more类似，但更加强大，根据查看所需加载文件，在查看大文件时效率更高（？：向上查找，/：向下查找，q：离开）
> >#### 12.echo：输出类内容到控制台（例如 ：输出主机名 echo $HOSTNAME）
> >#### 13.head：显示文件前几行（head -n 5 /etc/profile：查看前五行）
> >#### 14.tail：显示后几行（tail -f 文件名：实时监控文件更新）
> >#### 15.>：输出重定向
> >#### 16.>>：追加
> >#### 17.ln：软连接，相当与windows的快捷方式（ln -s 源文件路径 软连接名）
> >#### 18.history：查看使用过的命令（history 10：指定条数）
> >#### 19.!：执行曾经执行过的命令（例：!60：执行第六十条命令）
> ## 5.时间日期类
> >#### 1.date：显示当前日期（date + %Y，接受格式化字符串）
> >#### 2.cal：显示日历信息
> >#### 3.date -s 时间字符串：设置时间
> ## 6.文件查找类
> >#### 1.find 搜索范围 选项：递归查找指定目录下符合条件的目录或文件（选项：-name，-user，-size（+n：大于，-n：小于，n：等于））
> >#### 2.locate：快速定位文件位置，locate利用事先建立好的数据库尽行定位，无需遍历目录，效率高，为保证准确度管理原应定期更新数据库，第一次执行locate前应该使用updatedb创建locate数据库
> >#### 3.which：查看某个指令在哪个目录下
> >#### 4.grep：过滤指令，经常配合管道符使用，格式：grep 选项 查找内容 源文件，（例：cat xx.txt | grep -in "hello"，grep -in "hello" xx.txt ）
> ## 6.压缩和解压
> >#### 1.gzip：压缩文件，只能将文件压缩成 .gz
> >#### 2.gunzip：解压文件
> >#### 3.zip：压缩文件或文件夹，例：zip 选项 压缩文件名 源文件（-r：递归压缩）
> >#### 4.unzip：解压文件或文件夹，例：unzip 选项 压缩文件名（-d：解压到指定目录）
> >#### 5.tar：打包，压缩，解压（
> >	参数：
> >			c：打包
> >			x：解包
> >			v：显示tar处理的详细信息
> >			f：指定文件名
> >			C：解压到指定目录
> >）
> >
---
---
# 9.组管理和权限管理
>#### 1.chown：修改文件拥有者（chown 用户名 文件名）,也可同时修改所有者和所在组（chown 用户名:组 文件名），-R：递归修改
>#### 2.chgrp：修改文件所在的组（chgrp 组名 文件名）
>## 3.权限(r=4,w=2,x=1,rwx=7)
>![[权限说明.bmp]]
>![[rwx说明.bmp]]
> #### 1.chmod：修改权限（u：用户，g：组，o：其他用户，a：所有人），还可用数字
> >例：
>> chmod u=rw,g=rx,o=rx xx.txt
> >chmod u-x xx
> >chmod a+r xx
> >chmod 731 xx
---
---
# 10.实时任务调度
>## 1.crond
>> #### 1.crontab：进行定时任务设置（-e：编辑定时任务，-l：查询任务，-r：删除当前用户所有任务）
> >![[crontab语法.png]]![[任务调度每个占位符说明.png]]
> >![[crontab特殊符号说明.png]]
> >#### 2.service crond restart：重启任务调度
> ## 2.atd
> > #### 1.at命令一次性定时任务，默认atd守护进程没60秒检查作业队列，执行at命令时一定要保证atd进程的启动 (at 选项 时间)
> > #### 2.ps -ef：查看当前启动的进程 
> > #### 3.atq：查看任务列表
> > #### 4.atrm 任务编号：删除任务	
---
---
# 11.Linux 磁盘分区、挂载
>#### 1.lsblk：查看硬盘分区（lsblk -f）
>#### 2.fdisk 磁盘文件：分区命令（fdisk /dev/sdb）
>>	m：显示命令列表
>>	p：显示磁盘分区
>>	n：新增分区
>>	d：删除分区
>>	w：写入并退出
>>	q：退出不保存
>#### 3.mkfs -t [文件系统类型] 磁盘文件：对分区磁盘格式化，创建文件系统（mkfs -t ext4 /dev/sdb1）
>#### 4.mount 磁盘文件 挂载目录：挂载，用命令行挂载重启后会失效，永久挂载需要修改/etc/fstab文件，添加完后可执行mount -a立即生效，或重启
>#### 5.umount 磁盘文件 或 umount 挂载目录：卸载
>#### 6.df -h：查看磁盘使用情况
>#### 6.du 选项 目录：查看指定目录磁盘使用情况
>#### 7.wc：统计行数、单词数、字节数
>#### 8.tree 目录：以树状形式显示文件夹（首先得安装tree：yum install tree）
>
>
# 12.Linux网络环境配置
> ### 1.配置方式
> > #### 1.自动配置：自动配置的IP地址会变化，不能作为服务器
> > #### 2.手动配置：修改配置文件 etc/sysconfig/network-scripts/ifcfg-ens33，service network restart：重启网络服务或reboot生效
> ### 2.设置主机名和hosts映射
> > #### 1.设置主机名：修改/etc/hostname 文件，重启后生效
> > #### 2.hostname：查看主机名
> > #### 3.配置hosts映射：win下修改 C:/Windows/System32/drivers/etc/hosts文件,linux下修改/etc/hosts文件。例如：192.168.100.11 lxfdelinux
# 13.进程与服务管理
> ##1.进程管理
>>#### 1.每个执行的任务都称为一个进程，每个进程都分配一个id（pid）
> >#### 2.ps：查看当前正在执行的进程
> >	参数：
> >		a：查看终端机执行的所有进程信息
> >		u：以用户格式显示进程信息
> >		x：显示后台进程运行的参数
> >		e：显示所有进程
> >		f：全格式 
> >![[进程参数详解.jpg]]
> > #### 3.终止进程：kill 或 killall，例：kill 选项 进程号，killall 进程名，支持通配符，killall会终止所有子进程，选项 -9 ：强制终止 
> >####
> >#### 5.pstree：查看进程树，-p：显示pid，-u：显示所属用户名
> ## 2.服务管理
> >#### 1.服务本质就是进程，但是是运行在后台的
> >#### 2.service 服务名 选项：service 可以操作的服务在/etc/init.d目录下可以看到，选项：start，stop，restart，status，后多使用systemctl管理
>> #### 3.setup：可看到所有的服务名，服务名前有星号的会自启动
>> #### 4.chkconfig：设置服务在哪一个级别下自启动还是关闭，可管理的服务在/etc/init.d目录下，后多使用systemctl管理，--list：查看服务情况列表
>> #### 5.systemctl [start，stop，restart，status] 服务名：服务管理，systemctl可管理的服务在/usr/lib/systemd/system目录下查看，例如：重启sshd服务（远程登录）：systemctl start sshd.service，临时生效，系统重启后恢复默认状态
>> #### 6.设置自启动状态
>> ![[systemctl.jpg]]
>> ##3.防火墙打开关闭指定端口
> ![[firewall指令.jpg]] 
> ## 4.动态监控进程
> >#### 1.top和ps指令相似，都是用来显示进程的，但top能动态显示进程信息，top [选项]
>>![[top参数.jpg]]![[top交互命令.jpg]]u： 监控指定用户的进程
>>k：终止指定进程
>## 5.监控网络状态
>> #### 1.netstat [选项]：查看系统网络情况，-an：按照一定顺序排列输出，-p：查看是哪个进程在调用
# 14.yum和rpm
> ## 1.rpm：是互联网下载包和打包的工具，下载需要rpm包的完整路径
> > 参数 ：q 软件包名：查询指定包
> > 			qa：查询所有包
> > 			qi 软件报名：查询指定包的信息
> > 			ql 软件包名：查询软件包下的文件
> > 			qf 文件全路径：查询文件所属的软件包
> > 			e 包名：删除指定包
> > 			-e --nodeps：强制删除，不建议
> > 			i：下载
> > 			v：提示
> > 			h：进度条 
> ## 1.yum：是一个shell前端软件包管理器，基于rpm，能从指定服务下载rpm包，可自动处理依赖 ，install：下载，list：列出有哪些可以安装的rpm包
> ## 2.安装配置jdk
> > ####  1.在/etc/profile文件中配置环境变量，export JAVA_HOME=jdk安装目录，export PATH=$JAVA_HOME/bin:$PATH，修改完配置文件需要 source /etc/profile生效
# 15.shell编程
> ### 1.shell是一个命令解释器，它为用户提供一个向linux内核发送请求的界面系统级程序
> > ![[shell脚本的执行方式.jpg]]  ![[shell变量.jpg]]
> > 
> ###  2.设置环境变量 
>> ![[设置环境变量.jpg]]
>> 
> ###  3.当我们们执行一个shell脚本时需要从命令行获取参数，可以使用位置参数
> > ![[位置参数.jpg]]
> ### 4.预定义变量
> >![[预定义变量.jpg]]
> ### 5.运算符，如果想将expr运算结果赋给变量，需将expr表达式用反引号包起来
> >![[shell运算符.jpg]]
> ### 6.条件判断
> ```
> 	 if ["ok"="ok"]
> 		then 
> 			echo "equal"
> 	fi
> ``` 
> >![[条件判断.jpg]]
> >![[条件判断2.jpg]]
> ### 7.case语句
> >![[case.jpg]]
> ### 8.for循环
> >![[for循环.jpg]]
> ### 9.while循环,注意 while和 [] 有空格，条件判断式和 [] 也有空格
> >![[while循环.jpg]]
> ### 10.read读取控制台输入
> >![[read读取控制台输入.jpg]]
> ### 11.系统函数：basename,dirname
> ### 12.自定义函数
>> ```
>> 	[ function ] functionnanme ([])
>> 	{
>> 		Action;
>> 		[ return int; ]
>> 	}
>>```
# 16.安装ubuntu
> ### 1.安装ubuntu后没有直接创建root用户，需要 sudo passwd 设置root用户密码，才能切换root用户
> ### 2.apt使用
> >![[apt命令.jpg]]
> ### 3.修改 /etc/apt/source.list,改成国内镜像，修改完 apt-get update
> ### 4.修改ubuntu ip地址在 etc/network/interfaces文件中
> ### 5.linux远程登录到另一台linux：ssh 用户名@ip地址
# 17.日志
> ### 1.绝大多数日志文件在 /etc/log目录下
> ### 2.日志管理服务：rsyslogd，配置文件 /etc/rsyslog.conf,自定义日志服务也是在该配置文件中添加
> ## 3.暂且略过，需要再学
# 18.定制linux
> ### 1.裁剪现有linux，创建一个自己需要的小的linux
> ### 2.基本步骤
> >![[自定义linux系统.png]]
> ### 3.[GRUB](https://link.zhihu.com/?target=https%3A//www.gnu.org/software/grub/) 是一个用于加载和管理系统启动的完整程序。它是 Linux 发行版中最常见的_引导程序(bootloader)_。引导程序是计算机启动时运行的第一个软件。它加载 [操作系统的内核](https://link.zhihu.com/?target=https%3A//itsfoss.com/what-is-linux/)，然后再由内核初始化操作系统的其他部分（包括 Shell、[显示管理器](https://link.zhihu.com/?target=https%3A//linux.cn/article-12773-1.html)、[桌面环境](https://link.zhihu.com/?target=https%3A//linux.cn/article-12579-1.html) 等等）。
> ### 4.安装grub ： grub2-install --root-directory=/mnt /dev/sdc，检查是否安装成功：hexdump -C -n 512 /dev/sdc
> ### 5. 拷贝/boot/* 到 /mnt/boot
> ### 6.修改//mnt/boot/grub2/grub.cfg
# 19.备份和恢复
> ### 1.使用dump和restore，需要用yum下载，或者使用tar打包，需要的时候再解包覆盖
# 20.宝塔
> ### 1.宝塔安装命令：yum install -y wget && wget -O install.sh http://download.bt.cn/install/install_6.0.sh && sh install.sh